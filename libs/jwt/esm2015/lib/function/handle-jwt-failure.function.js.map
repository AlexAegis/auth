{"version":3,"file":"handle-jwt-failure.function.js","sourceRoot":"","sources":["../../../../../../libs/jwt/src/lib/function/handle-jwt-failure.function.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,QAAQ,EAAE,MAAM,8BAA8B,CAAC;AAExD;;;;;GAKG;AACH,MAAM,CAAC,MAAM,gBAAgB,GAAG,CAC/B,uBAAkD,EAClD,KAAQ,EACR,MAAe,EACf,kBAA0E,EACnE,EAAE;IACT,IAAI,QAAQ,CAAC,uBAAuB,CAAC,EAAE;QACtC,IAAI,MAAM,EAAE;YACX,IAAI,WAAW,GAAG,kBAAkB,CAAC;YACrC,IAAI,OAAO,kBAAkB,KAAK,UAAU,EAAE;gBAC7C,WAAW,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC;aACxC;YAED,MAAM,CAAC,QAAQ,CAAC,CAAC,uBAAuB,CAAC,EAAE;gBAC1C,WAAW;aACX,CAAC,CAAC;SACH;aAAM;YACN,oEAAoE;YACpE,MAAM,IAAI,KAAK,CACd,mCAAmC;gBAClC,8CAA8C;gBAC9C,8CAA8C;gBAC9C,0CAA0C,CAC3C,CAAC;SACF;KACD;SAAM;QACN,uBAAuB,CAAC,KAAK,CAAC,CAAC;KAC/B;AACF,CAAC,CAAC","sourcesContent":["import { HttpParams } from '@angular/common/http';\nimport { Params, Router } from '@angular/router';\nimport { isString } from '../function/string.predicate';\n\n/**\n * Jwt failures are handled by either calling a callback or if its a string,\n * redirect\n *\n * @internal\n */\nexport const handleJwtFailure = <E>(\n\terrorCallbackOrRedirect: string | ((e: E) => void),\n\terror: E,\n\trouter?: Router,\n\tredirectParameters?: ((e: E) => HttpParams | Params) | HttpParams | Params\n): void => {\n\tif (isString(errorCallbackOrRedirect)) {\n\t\tif (router) {\n\t\t\tlet queryParams = redirectParameters;\n\t\t\tif (typeof redirectParameters === 'function') {\n\t\t\t\tqueryParams = redirectParameters(error);\n\t\t\t}\n\n\t\t\trouter.navigate([errorCallbackOrRedirect], {\n\t\t\t\tqueryParams,\n\t\t\t});\n\t\t} else {\n\t\t\t// This error is intended to surface as it's a configuration problem\n\t\t\tthrow new Error(\n\t\t\t\t'JWT Refresh configuration error! ' +\n\t\t\t\t\t'`onFailure` is defined as a string, but the ' +\n\t\t\t\t\t'Router is not available! Is @angular/router ' +\n\t\t\t\t\t'installed and the RouterModule imported?'\n\t\t\t);\n\t\t}\n\t} else {\n\t\terrorCallbackOrRedirect(error);\n\t}\n};\n"]}